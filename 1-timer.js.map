{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst startBtn = document.querySelector(\"button[data-start]\");\nconst day = document.querySelector(\"span[data-days]\");\nconst hour = document.querySelector(\"span[data-hours]\");\nconst minute = document.querySelector(\"span[data-minutes]\");\nconst second = document.querySelector(\"span[data-seconds]\");\nconst input = document.querySelector(\".timer-input\")\nlet userSelectedDate = null;\nlet timerId = null;\nstartBtn.disabled = true;\n\n\nclass Timer {\n  constructor({onTick}) {\n    this.isActive = false;\n    this.onTick = onTick;\n  }\n  \n\n  start() {      \n    input.disabled = true;\n    startBtn.disabled = true;\n\n    // if (this.isActive) {\n    //   return;   \n    // }\n\n    // const startTime = Date.now();\n    // this.isActive = true;\n    \n    setInterval(() => {        \n      const currentTime = Date.now();\n      const deltaTime = userSelectedDate - currentTime;\n      \n      \n      // const time = this.convertMs(deltaTime);\n      if (deltaTime <= 0) {\n        clearInterval(timerId);\n        alert(\"Countdown finished\");\n      } else {\n        updateClockface(this.convertMs(deltaTime));\n        \n      }\n\n      this.onTick(time);\n    }, 1000);   \n\n  }\n\n  convertMs(ms) {   \n    const second = 1000;\n    const minute = second * 60;\n    const hour = minute * 60;\n    const day = hour * 24;\n    const days = this.pad(Math.floor(ms / day));\n    const hours = this.pad(Math.floor((ms % day) / hour));\n    const minutes = this.pad(Math.floor(((ms % day) % hour) / minute));\n    const seconds = this.pad(Math.floor((((ms % day) % hour) % minute) / second));\n    return { days, hours, minutes, seconds };\n  }\n\n  pad(value) {\n    return String(value).padStart(2, \"0\");\n  }\n}\n\nconst timer = new Timer({\n  onTick: updateClockface\n});\nstartBtn.addEventListener(\"click\", timer.start.bind(timer)); //timer.start.bind(timer)\n\nfunction updateClockface({ days, hours, minutes, seconds }) {\n  day.textContent = `${days}`;\n  hour.textContent = `${hours}`;\n  minute.textContent = `${minutes}`;\n  second.textContent = `${seconds}`;\n}\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  \n  onClose(selectedDates) {\n    if (selectedDates[0] < Date.now()) { //не поянял почему < канает в сравнении обьектов\n      window.alert(\"Please choose a date in the future\");\n      startBtn.disabled = true;\n    } else {\n      startBtn.disabled = false;\n      userSelectedDate = selectedDates;\n    }\n    console.log(selectedDates[0]);\n  },\n  \n};\n\nflatpickr(\"#datetime-picker\", options);\n\n\n\n\n\n\n"],"names":["startBtn","day","hour","minute","second","input","userSelectedDate","timerId","Timer","onTick","currentTime","deltaTime","updateClockface","ms","days","hours","minutes","seconds","value","timer","options","selectedDates","flatpickr"],"mappings":"wIAKA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAM,SAAS,cAAc,iBAAiB,EAC9CC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAS,SAAS,cAAc,oBAAoB,EACpDC,EAAQ,SAAS,cAAc,cAAc,EACnD,IAAIC,EAAmB,KACnBC,EAAU,KACdP,EAAS,SAAW,GAGpB,MAAMQ,CAAM,CACV,YAAY,CAAC,OAAAC,CAAM,EAAG,CACpB,KAAK,SAAW,GAChB,KAAK,OAASA,CACf,CAGD,OAAQ,CACNJ,EAAM,SAAW,GACjBL,EAAS,SAAW,GASpB,YAAY,IAAM,CAChB,MAAMU,EAAc,KAAK,MACnBC,EAAYL,EAAmBI,EAIjCC,GAAa,GACf,cAAcJ,CAAO,EACrB,MAAM,oBAAoB,GAE1BK,EAAgB,KAAK,UAAUD,CAAS,CAAC,EAI3C,KAAK,OAAO,IAAI,CACjB,EAAE,GAAI,CAER,CAED,UAAUE,EAAI,CAKZ,MAAMC,EAAO,KAAK,IAAI,KAAK,MAAMD,EAAK,KAAG,CAAC,EACpCE,EAAQ,KAAK,IAAI,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAC9CG,EAAU,KAAK,IAAI,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,CAAC,EAC3DI,EAAU,KAAK,IAAI,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAC5E,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACvC,CAED,IAAIC,EAAO,CACT,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACrC,CACH,CAEA,MAAMC,EAAQ,IAAIX,EAAM,CACtB,OAAQI,CACV,CAAC,EACDZ,EAAS,iBAAiB,QAASmB,EAAM,MAAM,KAAKA,CAAK,CAAC,EAE1D,SAASP,EAAgB,CAAE,KAAAE,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC1DhB,EAAI,YAAc,GAAGa,CAAI,GACzBZ,EAAK,YAAc,GAAGa,CAAK,GAC3BZ,EAAO,YAAc,GAAGa,CAAO,GAC/BZ,EAAO,YAAc,GAAGa,CAAO,EACjC,CAEA,MAAMG,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EAEjB,QAAQC,EAAe,CACjBA,EAAc,CAAC,EAAI,KAAK,IAAG,GAC7B,OAAO,MAAM,oCAAoC,EACjDrB,EAAS,SAAW,KAEpBA,EAAS,SAAW,GACpBM,EAAmBe,GAErB,QAAQ,IAAIA,EAAc,CAAC,CAAC,CAC7B,CAEH,EAEAC,EAAU,mBAAoBF,CAAO"}